!function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],f=0,p=[];f<s.length;f++)i=s[f],a[i]&&p.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);p.length;)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;o.push([460,1]),n()}({259:function(e,t,n){},448:function(e,t,n){var r={"./af":130,"./af.js":130,"./ar":131,"./ar-dz":132,"./ar-dz.js":132,"./ar-kw":133,"./ar-kw.js":133,"./ar-ly":134,"./ar-ly.js":134,"./ar-ma":135,"./ar-ma.js":135,"./ar-sa":136,"./ar-sa.js":136,"./ar-tn":137,"./ar-tn.js":137,"./ar.js":131,"./az":138,"./az.js":138,"./be":139,"./be.js":139,"./bg":140,"./bg.js":140,"./bm":141,"./bm.js":141,"./bn":142,"./bn.js":142,"./bo":143,"./bo.js":143,"./br":144,"./br.js":144,"./bs":145,"./bs.js":145,"./ca":146,"./ca.js":146,"./cs":147,"./cs.js":147,"./cv":148,"./cv.js":148,"./cy":149,"./cy.js":149,"./da":150,"./da.js":150,"./de":151,"./de-at":152,"./de-at.js":152,"./de-ch":153,"./de-ch.js":153,"./de.js":151,"./dv":154,"./dv.js":154,"./el":155,"./el.js":155,"./en-SG":156,"./en-SG.js":156,"./en-au":157,"./en-au.js":157,"./en-ca":158,"./en-ca.js":158,"./en-gb":159,"./en-gb.js":159,"./en-ie":160,"./en-ie.js":160,"./en-il":161,"./en-il.js":161,"./en-nz":162,"./en-nz.js":162,"./eo":163,"./eo.js":163,"./es":164,"./es-do":165,"./es-do.js":165,"./es-us":166,"./es-us.js":166,"./es.js":164,"./et":167,"./et.js":167,"./eu":168,"./eu.js":168,"./fa":169,"./fa.js":169,"./fi":170,"./fi.js":170,"./fo":171,"./fo.js":171,"./fr":172,"./fr-ca":173,"./fr-ca.js":173,"./fr-ch":174,"./fr-ch.js":174,"./fr.js":172,"./fy":175,"./fy.js":175,"./ga":176,"./ga.js":176,"./gd":177,"./gd.js":177,"./gl":178,"./gl.js":178,"./gom-latn":179,"./gom-latn.js":179,"./gu":180,"./gu.js":180,"./he":181,"./he.js":181,"./hi":182,"./hi.js":182,"./hr":183,"./hr.js":183,"./hu":184,"./hu.js":184,"./hy-am":185,"./hy-am.js":185,"./id":186,"./id.js":186,"./is":187,"./is.js":187,"./it":188,"./it-ch":189,"./it-ch.js":189,"./it.js":188,"./ja":190,"./ja.js":190,"./jv":191,"./jv.js":191,"./ka":192,"./ka.js":192,"./kk":193,"./kk.js":193,"./km":194,"./km.js":194,"./kn":195,"./kn.js":195,"./ko":196,"./ko.js":196,"./ku":197,"./ku.js":197,"./ky":198,"./ky.js":198,"./lb":199,"./lb.js":199,"./lo":200,"./lo.js":200,"./lt":201,"./lt.js":201,"./lv":202,"./lv.js":202,"./me":203,"./me.js":203,"./mi":204,"./mi.js":204,"./mk":205,"./mk.js":205,"./ml":206,"./ml.js":206,"./mn":207,"./mn.js":207,"./mr":208,"./mr.js":208,"./ms":209,"./ms-my":210,"./ms-my.js":210,"./ms.js":209,"./mt":211,"./mt.js":211,"./my":212,"./my.js":212,"./nb":213,"./nb.js":213,"./ne":214,"./ne.js":214,"./nl":215,"./nl-be":216,"./nl-be.js":216,"./nl.js":215,"./nn":217,"./nn.js":217,"./pa-in":218,"./pa-in.js":218,"./pl":219,"./pl.js":219,"./pt":220,"./pt-br":221,"./pt-br.js":221,"./pt.js":220,"./ro":222,"./ro.js":222,"./ru":223,"./ru.js":223,"./sd":224,"./sd.js":224,"./se":225,"./se.js":225,"./si":226,"./si.js":226,"./sk":227,"./sk.js":227,"./sl":228,"./sl.js":228,"./sq":229,"./sq.js":229,"./sr":230,"./sr-cyrl":231,"./sr-cyrl.js":231,"./sr.js":230,"./ss":232,"./ss.js":232,"./sv":233,"./sv.js":233,"./sw":234,"./sw.js":234,"./ta":235,"./ta.js":235,"./te":236,"./te.js":236,"./tet":237,"./tet.js":237,"./tg":238,"./tg.js":238,"./th":239,"./th.js":239,"./tl-ph":240,"./tl-ph.js":240,"./tlh":241,"./tlh.js":241,"./tr":242,"./tr.js":242,"./tzl":243,"./tzl.js":243,"./tzm":244,"./tzm-latn":245,"./tzm-latn.js":245,"./tzm.js":244,"./ug-cn":246,"./ug-cn.js":246,"./uk":247,"./uk.js":247,"./ur":248,"./ur.js":248,"./uz":249,"./uz-latn":250,"./uz-latn.js":250,"./uz.js":249,"./vi":251,"./vi.js":251,"./x-pseudo":252,"./x-pseudo.js":252,"./yo":253,"./yo.js":253,"./zh-cn":254,"./zh-cn.js":254,"./zh-hk":255,"./zh-hk.js":255,"./zh-tw":256,"./zh-tw.js":256};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=448},450:function(e,t,n){},457:function(e,t,n){},458:function(e,t,n){},459:function(e,t,n){},460:function(e,t,n){"use strict";n.r(t);n(259),n(260);var r=n(1),a=n.n(r),o=n(257),i=n.n(o),s=n(64),c=n.n(s),u=n(0),l=n.n(u),f={fields:{start_date:"START_DATE",area:"AREA_",pct_contained:"PER_CONT",name:"FIRE_NAME",state:"STATE",lat:"LATITUDE",lon:"LONGITUDE",internal_id:"INTERNALID",load_date:"LOAD_DATE",report_date:"REPORT_DATE"},smoke_layer:{url:"https://utility.arcgis.com/usrsvcs/servers/1bb73533826544d1a2c47475c2ae5aee/rest/services/LiveFeeds/NDGD_SmokeForecast/MapServer"},state_fullname:{AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District Of Columbia",FM:"Federated States Of Micronesia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"}};function p(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){p(o,r,a,i,s,"next",e)}function s(e){p(o,r,a,i,s,"throw",e)}i(void 0)}))}}var h=n(449).Promise,y="https://utility.arcgis.com/usrsvcs/servers/fc88a2aa759f4ac28e63d2f58b2815cc/rest/services/LiveFeeds/Wildfire_Activity/MapServer",d=y+"/0/query",v=y+"/0/generateRenderer",b={area:f.fields.area,pctContained:f.fields.pct_contained,startDate:f.fields.start_date,reportDate:f.fields.report_date,name:f.fields.name},g=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e={activeFires:[],activeFiresDict:{}},t=function(){var e=m(regeneratorRuntime.mark((function e(){var t,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(b.pctContained," < 100 AND ACTIVE = 'Y'"),e.next=3,p({classificationField:b.area,where:t});case 3:return r=e.sent,e.next=6,u({where:t});case 6:return a=e.sent,a=s(a.features,r.classBreakInfos),n(a),e.next=11,k();case 11:return o=e.sent,e.abrupt("return",{activeFires:a,classBreakInfos:r.classBreakInfos,smokeLayerInfo:o});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.activeFires=t,t.forEach((function(t){var n=t.attributes.OBJECTID;e.activeFiresDict[n]=t}))},r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return e.activeFiresDict[t]},a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t){var n=e.activeFires.filter((function(e){var n=e.geometry.x,r=e.geometry.y;return n>=t.xmin&&n<=t.xmax&&r>=t.ymin&&r<=t.ymax}));return n}return e.activeFires},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=a(e);return n[0]?t?n[0].attributes.OBJECTID:n[0]:null},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t){var n=new RegExp("^"+t+".*$","i"),r=e.activeFires.filter((function(e){return e.attributes[b.name].match(n)}));return r}return e.activeFires},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=[];return e.forEach((function(e){e.attributes[b.startDate]||(e.attributes[b.startDate]=e.attributes[b.reportDate]);for(var r=0,a=t.length;r<a;r++)if(e.attributes[b.area]<=t[r].classMaxValue){e.classBreak=r;break}e.attributes[b.startDate]&&n.push(e)})),n},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.where,n=void 0===t?"".concat(b.pctContained," < 100"):t,r=e.extentGeometry,a=void 0===r?null:r,o={where:n,outFields:"*",f:"json"};return a&&(o.geometry=JSON.stringify(a),o.geometryType="esriGeometryEnvelope",o.spatialRel="esriSpatialRelIntersects"),new h((function(e,t){c.a.get(d,{params:o}).then((function(n){var r=n.data;r.error?t(r.error):e(r)})).catch((function(e){t(e)}))}))},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{where:"1=1",classificationField:""};return new h((function(t,n){var r=y();r?t(r):c.a.get(v,{params:{classificationDef:{type:"classBreaksDef",classificationField:e.classificationField,classificationMethod:"esriClassifyNaturalBreaks",breakCount:5},where:e.where,f:"json"}}).then((function(e){var r=e.data;r.error?n(r.error):(g(r),t(r))})).catch((function(e){n(e)}))}))},y=function(){var e=localStorage.getItem("classBreakRendererInfo")?JSON.parse(localStorage.getItem("classBreakRendererInfo")):null;return e?(!l()().isAfter(e.expiration)&&e.data,e.data):null},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=l()().add(2,"days").valueOf();if(e){var n={data:e,expiration:t};localStorage.setItem("classBreakRendererInfo",JSON.stringify(n))}},k=function(){var e=f.smoke_layer.url+"/0?f=json";return new h((function(t,n){c.a.get(e).then((function(e){var r=e.data;r.error?n(r.error):t(r)})).catch((function(e){n(e)}))}))};return{init:t,getActiveFiresInMapExtent:a,getActiveFireByOID:r,searchFireByExtent:o,searchFireByName:i}},k=n(258),w=n(25),j=(n(450),n(24));function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=O(this,F(t).call(this,e))).state={left:0,top:0},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,e),n=t,(r=[{key:"getContent",value:function(){if(!this.props.data||!this.props.data.attributes)return null;var e=this.props.data.attributes[f.fields.area]||0,t=this.props.data.attributes[f.fields.pct_contained]||0,n=this.props.data.attributes[f.fields.start_date],r=l()(n).format("MMMM Do YYYY"),o=this.props.data.attributes[f.fields.name]||"No Name",i=f.state_fullname[this.props.data.attributes[f.fields.state]]||"",s=o.toLowerCase()+" fire",c="https://news.google.com/search?q="+encodeURIComponent(s),u="https://twitter.com/search?q="+encodeURIComponent(s),p="https://www.facebook.com/search/top/?q="+encodeURIComponent(s),m=a.a.createElement("div",{className:"customized-info-window"},a.a.createElement("div",{className:"customized-popup-header"},a.a.createElement("span",{className:"font-size--3"},"Start Date: ",a.a.createElement("strong",null,r)),a.a.createElement("span",{className:"icon-ui-close avenir-bold cursor-pointer font-size--3 right",onClick:this.props.onClose})),a.a.createElement("div",{className:"leader-quarter trailer-quarter"},a.a.createElement("p",{className:"trailer-half font-size--2"},"The ",a.a.createElement("strong",null,s)," in ",i," is estimated to be ",a.a.createElement("strong",null,j.numberFns.numberWithCommas(e))," acres and ",a.a.createElement("strong",null,t,"%")," contained."),a.a.createElement("div",{className:"info-window-links padding-leader-half font-size--3"},a.a.createElement("a",{href:c,target:"_blank",className:""},"News"),a.a.createElement("a",{href:u,target:"_blank",className:"margin-left-half"},"Twitter"),a.a.createElement("a",{href:p,target:"_blank",className:"margin-left-half"},"Facebook"))));return this.props.data?m:null}},{key:"updateInfoWindowPosition",value:function(){var e=document.getElementById("customizedInfoWindowDiv").offsetHeight;this.setState({left:this.props.position.x+20}),this.setState({top:this.props.position.y-e/2})}},{key:"componentDidUpdate",value:function(e){e.position!==this.props.position&&this.updateInfoWindowPosition()}},{key:"render",value:function(){return a.a.createElement("div",{id:"customizedInfoWindowDiv",style:{position:"absolute",left:"".concat(this.state.left,"px"),top:"".concat(this.state.top,"px"),backgroundColor:"rgba(26, 0, 17, 0.9)"}},this.getContent())}}])&&S(n.prototype,r),o&&S(n,o),t}(a.a.PureComponent),C={default:[{url:"https://static.arcgis.com/images/Symbols/Firefly/FireflyB17.png",type:"picture-marker",height:15,width:15},{url:"https://static.arcgis.com/images/Symbols/Firefly/FireflyB17.png",type:"picture-marker",height:25,width:25},{url:"https://static.arcgis.com/images/Symbols/Firefly/FireflyB17.png",type:"picture-marker",height:35,width:35},{url:"https://static.arcgis.com/images/Symbols/Firefly/FireflyB17.png",type:"picture-marker",height:45,width:45},{url:"https://static.arcgis.com/images/Symbols/Firefly/FireflyB17.png",type:"picture-marker",height:55,width:55}],background:[{url:"https://static.arcgis.com/images/Symbols/Firefly/FireflyC1.png",type:"picture-marker",height:25,width:25},{url:"https://static.arcgis.com/images/Symbols/Firefly/FireflyC1.png",type:"picture-marker",height:35,width:35},{url:"https://static.arcgis.com/images/Symbols/Firefly/FireflyC1.png",type:"picture-marker",height:45,width:45},{url:"https://static.arcgis.com/images/Symbols/Firefly/FireflyC1.png",type:"picture-marker",height:55,width:55},{url:"https://static.arcgis.com/images/Symbols/Firefly/FireflyC1.png",type:"picture-marker",height:65,width:65}]};function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function N(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(){var t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.mapUrl,o=void 0===a?"":a,i=r.mapParameters,s=void 0===i?{}:i,c=r.layerParams,u=void 0===c?{}:c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.keys(s).forEach((function(e){s[e]})),(t=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.init({mapUrl:o,mapParameters:s,layerParams:u});case 2:return n.layer=e.sent,e.abrupt("return",n.layer);case 4:case"end":return e.stop()}}),e,this)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(e){N(o,r,a,i,s,"next",e)}function s(e){N(o,r,a,i,s,"throw",e)}i(void 0)}))})()}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapUrl,n=void 0===t?"":t,r=e.mapParameters,a=void 0===r?{}:r,o=e.layerParams,i=void 0===o?{}:o;return a=Object.assign({format:"png32",layers:"0",size:"{width},{height}",bbox:"{xmin},{ymin},{xmax},{ymax}",transparent:"true",f:"image"},a),i=Object.assign(i,{mapUrl:n,mapParameters:a}),new Promise((function(e,t){Object(w.loadModules)(["esri/layers/BaseDynamicLayer","esri/request"]).then((function(t){var n=M(t,2),r=n[0],a=n[1],o=new(r.createSubclass({properties:{mapUrl:null,mapParameters:null,cssFilter:null},getImageUrl:function(e,t,n){var r=this._prepareQuery(this.mapParameters,e,t,n),a=this._joinUrlVariables(r);return this.mapUrl+"?"+a},fetchImage:function(e,t,n){var r=this.getImageUrl(e,t,n);return a(r,{responseType:"image"}).then(function(e){var r=e.data,a=document.createElement("canvas"),o=a.getContext("2d");return a.width=t,a.height=n,this.cssFilter&&(o.filter=this.cssFilter),o.globalCompositeOperation="normal",o.drawImage(r,0,0,t,n),a}.bind(this))},_prepareQuery:function(e,t,n,r){var a={width:n,height:r,wkid:t.spatialReference.isWebMercator?3857:t.spatialReference.wkid,xmin:t.xmin,xmax:t.xmax,ymin:t.ymin,ymax:t.ymax};return this._replace({},e,a)},_replace:function(e,t,n){return Object.keys(t).forEach((function(r){e[r]=Object.keys(n).reduce((function(e,t){return e.replace("{"+t+"}",n[t])}),t[r])})),e},_joinUrlVariables:function(e){return Object.keys(e).reduce((function(t,n){return t+(t?"&":"")+n+"="+e[n]}),"")}}))(i);e(o)})).catch((function(e){t(e)}))}))}},{key:"setTime",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}])&&P(t.prototype,n),r&&P(t,r),e}();function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){D(e,t,n[t])}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function z(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){V(o,r,a,i,s,"next",e)}function s(e){V(o,r,a,i,s,"throw",e)}i(void 0)}))}}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var H=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=W(this,B(t).call(this,e))).state={infoWindowPostion:{x:0,y:0}},n.mapContainerRef=a.a.createRef(),n.mapView=null,n.activeFiresLayer=null,n.smokeForecastLayer=null,n}var n,r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,e),n=t,(r=[{key:"initMap",value:function(){var e=this;Object(w.loadCss)(),Object(w.loadModules)(["esri/views/MapView","esri/WebMap"]).then((function(t){var n=R(t,2),r=n[0],a=n[1],o=e.parsePredefineExtent(),i=e.mapContainerRef.current;e.mapView=new r({map:new a({portalItem:{id:"ba6c28836375471d8d6233d521f5ef26"}}),extent:o,container:i,padding:{right:e.props.rightPadding||0}}),e.initLayers(),e.mapView.when((function(){e.mapViewOnReadyHandler(),e.initWatchUtils()})).catch((function(e){}))})).catch((function(e){}))}},{key:"parsePredefineExtent",value:function(){var e=j.urlFns.parseQuery(),t=e.ext?e.ext.split(","):null;if(t&&4===t.length)return{xmin:+t[0],ymin:+t[1],xmax:+t[2],ymax:+t[3],spatialReference:{latestWkid:3857,wkid:102100}}}},{key:"initLayers",value:function(){var e=this;Object(w.loadModules)(["esri/layers/GraphicsLayer"]).then((function(t){var n=R(t,1)[0];e.activeFiresLayer=new n,e.mapView.map.addMany([e.activeFiresLayer])})).catch((function(e){}))}},{key:"mapViewOnReadyHandler",value:function(){var e=this;this.showFires(),this.initSmokeForecastLayer(),this.mapView.on("click",function(){var t=z(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getQueryExtent(n.x,n.y);case 2:r=t.sent,e.props.onClick(r.toJSON());case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}())}},{key:"initSmokeForecastLayer",value:(i=z(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.smokeForecastTime.toString(),e.next=3,new I({layerParams:{id:"smokeForecastLayer",opacity:.7,visible:this.props.isSmokeForecastLayerVisible,cssFilter:"invert(100%) blur(5px) saturate(.4)"},mapUrl:f.smoke_layer.url+"/export",mapParameters:{layers:"0",time:t}});case 3:this.smokeForecastLayer=e.sent,this.mapView.map.add(this.smokeForecastLayer,0);case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"initWatchUtils",value:function(){var e=this;Object(w.loadModules)(["esri/core/watchUtils"]).then((function(t){var n=R(t,1)[0],r=e.mapView;n.whenTrue(r,"stationary",(function(){r.extent&&e.props.onExtentChange&&e.props.onExtentChange({extent:r.extent.toJSON(),zoom:r.zoom})})),n.watch(r,"center",(function(t){e.updateInfoWindowPosition()}))})).catch((function(e){}))}},{key:"showFires",value:function(){var e=this;Object(w.loadModules)(["esri/Graphic"]).then((function(t){var n=R(t,1)[0];e.props.activeFires.forEach((function(t){var r={geometry:{type:"point",longitude:t.attributes.LONGITUDE,latitude:t.attributes.LATITUDE},attributes:t.attributes},a=new n(L({},r,{symbol:C.default[t.classBreak]})),o=new n(L({},r,{symbol:C.background[t.classBreak]}));e.activeFiresLayer.addMany([o,a]),e.mapView.map.reorder(e.activeFiresLayer,e.mapView.map.layers.length)}))})).catch((function(e){}))}},{key:"filterActiveFires",value:function(){var e=this;this.activeFiresLayer.graphics.forEach((function(t){var n=!e.props.selectedFireName||e.props.selectedFireName===t.attributes.FIRE_NAME;t.visible=n}))}},{key:"zoomToFire",value:function(){var e=this;Object(w.loadModules)(["esri/geometry/Point"]).then((function(t){var n=new(0,R(t,1)[0])({x:e.props.activeFireToZoom.geometry.x,y:e.props.activeFireToZoom.geometry.y,spatialReference:{latestWkid:3857,wkid:102100}});e.mapView.goTo({target:n,zoom:12})})).catch((function(e){}))}},{key:"setTimeForSmokeForecastLayer",value:function(){if(this.smokeForecastLayer.visible){var e=new Date(this.props.smokeForecastTime),t=e.setHours(e.getHours()+1),n=[this.props.smokeForecastTime.toString(),t.toString()];this.smokeForecastLayer.mapParameters.time=n.join(","),this.smokeForecastLayer.refresh()}}},{key:"componentDidMount",value:function(){this.initMap()}},{key:"componentDidUpdate",value:function(e){e.selectedFireName!==this.props.selectedFireName&&this.filterActiveFires(),e.infoWindowData!==this.props.infoWindowData&&this.updateInfoWindowPosition(),e.activeFireToZoom!==this.props.activeFireToZoom&&this.zoomToFire(),e.isSmokeForecastLayerVisible!==this.props.isSmokeForecastLayerVisible&&this.smokeForecastLayer&&(this.smokeForecastLayer.visible=this.props.isSmokeForecastLayerVisible),e.smokeForecastTime!==this.props.smokeForecastTime&&this.smokeForecastLayer&&this.setTimeForSmokeForecastLayer()}},{key:"componentDidCatch",value:function(e,t){}},{key:"updateInfoWindowPosition",value:function(){var e=0,t=0;if(this.props.infoWindowData){var n={x:this.props.infoWindowData.geometry.x,y:this.props.infoWindowData.geometry.y,spatialReference:{wkid:102100}},r=this.mapView.toScreen(n);e=r.x||0,t=r.y||0}this.setState({infoWindowPostion:{x:e,y:t}})}},{key:"getQueryExtent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=e-n,a=t+n,o=e+n,i=t-n,s=this.mapView.toMap({x:r,y:a}),c=this.mapView.toMap({x:o,y:i});return new Promise((function(e,t){Object(w.loadModules)(["esri/geometry/Extent"]).then((function(t){var n=new(0,R(t,1)[0])({xmin:s.x,ymin:s.y,xmax:c.x,ymax:c.y,spatialReference:{latestWkid:3857,wkid:102100}});e(n)})).catch((function(e){t(e)}))}))}},{key:"render",value:function(){return a.a.createElement("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,overflowY:"hidden"}},a.a.createElement("div",{ref:this.mapContainerRef,style:{height:"100%",bottom:"100%"}}),a.a.createElement(_,{position:this.state.infoWindowPostion,data:this.props.infoWindowData,onClose:this.props.onInfoWindowClose}))}}])&&A(n.prototype,r),o&&A(n,o),t}(a.a.PureComponent);n(457);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Q=f.fields.start_date,K=f.fields.pct_contained,X=f.fields.name,$=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=G(t).call(this,e))||"object"!==J(a)&&"function"!=typeof a?Z(r):a).onMouseEnter=n.onMouseEnter.bind(Z(Z(n))),n.onMouseLeave=n.onMouseLeave.bind(Z(Z(n))),n.onClick=n.onClick.bind(Z(Z(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,e),n=t,(r=[{key:"prepareData",value:function(){var e=this,t=JSON.parse(JSON.stringify(this.props.data)),n={},r=[];return t.sort((function(e,t){return t.attributes[Q]-e.attributes[Q]})),t.forEach((function(e){var t=l()(e.attributes[Q]).startOf("day");n[t]?n[t].fires.push(e):(n[t]={startDate:t,fires:[e],isFirstItemInMonth:!1},r.push(t))})),t=r.map((function(t,a){var o=r[a-1];return e.compareMonthVal(t,o)&&(n[t].isFirstItemInMonth=!0),n[t]}))}},{key:"compareMonthVal",value:function(e,t){return e=new Date(e),t=new Date(t),!(!e||!t||e.getMonth()===t.getMonth())}},{key:"onMouseEnter",value:function(e){var t=e.currentTarget.dataset.fireId||-1;this.props.onMouseEnter(t)}},{key:"onMouseLeave",value:function(){this.props.onMouseLeave()}},{key:"onClick",value:function(e){var t=e.currentTarget.dataset.fireId||-1;this.props.onClick(t)}},{key:"render",value:function(){var e=this,t=this.prepareData().map((function(t,n){var r=l()(t.startDate).format("MMM Do"),o=l()(t.startDate).format("MMMM"),i=a.a.createElement("div",{className:"timeline-month-title text-center"},a.a.createElement("div",{className:"padding-leader-quarter padding-trailer-quarter"},a.a.createElement("span",{className:"avenir-bold"},o))),s=t.fires.map((function(t,n){var r=t.attributes.OBJECTID,o=t.attributes[K],i=t.attributes[X],s=t.classBreak;return a.a.createElement("div",{key:"fire-info"+n,className:"leader-half trailer-half fire-info","data-fire-id":r,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},a.a.createElement("div",{className:"inline-block font-size--3 padding-left-half margin-right-half cursor-pointer"},a.a.createElement("span",null,a.a.createElement("strong",null,j.stringFns.capitalizeFirstLetter(i)," Fire"),"  ",a.a.createElement("br",null)," ",o,"% contained")),a.a.createElement("div",{className:"legend-icon legend-class-".concat(s)}))}));return a.a.createElement("div",{key:"timeline-item-"+n},t.isFirstItemInMonth?i:null,a.a.createElement("div",{className:"timeline-item"},a.a.createElement("div",{className:"date-info font-size--2"},r),a.a.createElement("div",{className:"fire-info-wrap text-right"},s)))}));return a.a.createElement("div",{id:"timelineDiv"},t)}}])&&q(n.prototype,r),o&&q(n,o),t}(a.a.PureComponent);n(458);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var oe=f.fields.pct_contained,ie=f.fields.area,se=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=ne(t).call(this,e))||"object"!==ee(a)&&"function"!=typeof a?ae(r):a).onMouseEnter=n.onMouseEnter.bind(ae(ae(n))),n.onMouseLeave=n.onMouseLeave.bind(ae(ae(n))),n.onClick=n.onClick.bind(ae(ae(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,e),n=t,(r=[{key:"onMouseEnter",value:function(e){var t=e.currentTarget.dataset.fireId||-1;this.props.onMouseEnter(t)}},{key:"onMouseLeave",value:function(){this.props.onMouseLeave()}},{key:"onClick",value:function(e){var t=e.currentTarget.dataset.fireId||-1;this.props.onClick(t)}},{key:"render",value:function(){var e=this,t=JSON.parse(JSON.stringify(this.props.data))||[];t.sort((function(e,t){return t.attributes[ie]-e.attributes[ie]}));var n=t.map((function(t,n){var r=t.attributes.OBJECTID,o=t.attributes[oe],i=t.classBreak;return a.a.createElement("div",{key:"grid-item-".concat(n),className:"js-show-info-window block trailer-half js-zoom-to-fire","data-fire-id":r,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},a.a.createElement("div",{className:"legend-icon legend-class-".concat(i)},a.a.createElement("div",{className:"bottom-pct-indicator"},a.a.createElement("div",{className:"highlight-bar",style:{width:"".concat(o,"%")}}))))}));return a.a.createElement("div",{id:"gridListDiv"},a.a.createElement("div",{className:"legend-grid block-group block-group-6-up"},n))}}])&&te(n.prototype,r),o&&te(n,o),t}(a.a.PureComponent);function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var me=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),le(this,fe(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props.data.map((function(t,n){var r=0===n?t+" / ":t,o=e.props.visibleTab===t?a.a.createElement("strong",null,r):r;return a.a.createElement("span",{key:"tab-btn-".concat(t),className:"cursor-pointer",onClick:function(){e.props.onClick(t)}},o)}));return a.a.createElement("nav",{className:"breadcrumb-nav inline-block"},t)}}])&&ue(n.prototype,r),o&&ue(n,o),t}(a.a.PureComponent);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ge=["timeline","magnitude"],ke=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=de(t).call(this,e))||"object"!==he(a)&&"function"!=typeof a?be(r):a).state={visibleTab:ge[0]},n.toggleVisibleTab=n.toggleVisibleTab.bind(be(be(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(t,e),n=t,(r=[{key:"toggleVisibleTab",value:function(e){e=ge.indexOf(e)>-1?e:ge[0],this.setState({visibleTab:e})}},{key:"render",value:function(){var e={timeline:a.a.createElement($,{data:this.props.data,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onClick:this.props.onClick}),magnitude:a.a.createElement(se,{data:this.props.data,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onClick:this.props.onClick})};return a.a.createElement("div",{id:"listViewDiv"},a.a.createElement("div",{className:"leader-half padding-leader-half trailer-quarter font-size--3",style:{borderTop:"solid 1px #670043"}},a.a.createElement(me,{data:ge,visibleTab:this.state.visibleTab,onClick:this.toggleVisibleTab}),a.a.createElement("span",{className:"right"},"total fires in view: ",this.props.data.length)),a.a.createElement("div",{className:"leader-half"},e[this.state.visibleTab]))}}])&&ye(n.prototype,r),o&&ye(n,o),t}(a.a.PureComponent);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fe=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ee(this,Se(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){for(var e=[],t=4;t>=0;t--){var n=this.props.data[t]&&this.props.data[t].classMaxValue?j.numberFns.abbreviateNumber(this.props.data[t].classMaxValue):"",r=a.a.createElement("div",{key:"legend-item-".concat(t),className:"block filter-wrap text-center font-size--3"},a.a.createElement("div",{className:"legend-icon legend-class-".concat(t)}),a.a.createElement("div",{className:"filter-label"},n));e.push(r)}return a.a.createElement("div",{id:"legendDiv"},a.a.createElement("div",{className:"block-group block-group-5-up leader-half trailer-half legend-filter-container"},e))}}])&&je(n.prototype,r),o&&je(n,o),t}(a.a.PureComponent);n(459);function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Pe=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=Ce(t).call(this,e))||"object"!==xe(a)&&"function"!=typeof a?Ne(r):a).state={isSuggestionListVisible:!1},n.toggleSuggestionList=n.toggleSuggestionList.bind(Ne(Ne(n))),n.onSuggestItemClick=n.onSuggestItemClick.bind(Ne(Ne(n))),n.onInput=n.onInput.bind(Ne(Ne(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,e),n=t,(r=[{key:"toggleSuggestionList",value:function(){this.setState((function(e){return{isSuggestionListVisible:!e.isSuggestionListVisible}}))}},{key:"onSuggestItemClick",value:function(e){var t=e.currentTarget.dataset.fireName;this.props.onSelect(t),this.toggleSuggestionList(),document.getElementById("fireQueryInput").value=t}},{key:"onInput",value:function(e){var t=e.currentTarget.value;this.props.onSelect(t)}},{key:"getSuggestionList",value:function(){var e=this,t=JSON.parse(JSON.stringify(this.props.data))||[];t.sort((function(e,t){return e.attributes[f.fields.name]>t.attributes[f.fields.name]?1:-1}));var n=t.map((function(t,n){var r=t.attributes[f.fields.name];return a.a.createElement("div",{key:"suggestion-item-".concat(n),className:"suggestion-item cursor-pointer","data-fire-name":r,onClick:e.onSuggestItemClick},a.a.createElement("span",{className:"font-size--2"},r))}));return a.a.createElement("div",{className:"suggestion-list-container"},n)}},{key:"render",value:function(){var e=this.getSuggestionList();return a.a.createElement("div",{id:"searchInputDiv",className:"search-input-wrap"},a.a.createElement("input",{id:"fireQueryInput",type:"text",placeholder:"Search by fire name...",className:"customized-input",onInput:this.onInput}),a.a.createElement("div",{className:"search-input-btns-wrap text-center cursor-point"},a.a.createElement("div",{className:"search-input-btn toggle-suggestion-list-btn inline-block right",onClick:this.toggleSuggestionList},this.state.isSuggestionListVisible?a.a.createElement("span",{className:"icon-ui-up"}):a.a.createElement("span",{className:"icon-ui-down"}))),a.a.createElement("div",null,this.state.isSuggestionListVisible?e:null))}}])&&_e(n.prototype,r),o&&_e(n,o),t}(a.a.PureComponent);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ze=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=Le(t).call(this,e))||"object"!==Ie(a)&&"function"!=typeof a?Ve(r):a).state={isChecked:!1},n.toggleIsChecked=n.toggleIsChecked.bind(Ve(Ve(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(t,e),n=t,(r=[{key:"toggleIsChecked",value:function(){var e=this;this.setState({isChecked:!this.state.isChecked},(function(){e.props.onChange(e.state.isChecked)}))}},{key:"render",value:function(){var e=this.state.isChecked?a.a.createElement("span",{className:"icon-ui-checkbox-checked"}):a.a.createElement("span",{className:"icon-ui-checkbox-unchecked"}),t=this.state.isChecked?a.a.createElement("span",{className:"margin-left-quarter"},"(",l()(this.props.smokeForecastTime).format("MMMM Do, h:mm a"),")"):"";return a.a.createElement("div",{className:"checkbox-control font-size--3"},a.a.createElement("div",{className:"checkbox-icon inline-block",onClick:this.toggleIsChecked},e),a.a.createElement("span",{className:"checkbox-label"},"Smoke forecast ",t))}}])&&Te(n.prototype,r),o&&Te(n,o),t}(a.a.PureComponent);function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var He,Je,qe=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=We(t).call(this,e))||"object"!==Re(a)&&"function"!=typeof a?Ue(r):a).state={fireName:"",infoWindowData:null,activeFireToZoom:null,isSmokeForecastLayerVisible:!1,smokeForecastTime:n.props.smokeLayerTimeInfo.timeExtent[0],listViewData:[],isSidebarMinimized:!1},n.timerForSmokeForecastLayerAnimation=null,n.mapExtentChangeHandler=n.mapExtentChangeHandler.bind(Ue(Ue(n))),n.mapOnClickHandler=n.mapOnClickHandler.bind(Ue(Ue(n))),n.updateInfoWindowData=n.updateInfoWindowData.bind(Ue(Ue(n))),n.zoomToActiveFire=n.zoomToActiveFire.bind(Ue(Ue(n))),n.updateFireName=n.updateFireName.bind(Ue(Ue(n))),n.toggleSmokeForecastLayer=n.toggleSmokeForecastLayer.bind(Ue(Ue(n))),n.toggleSidebar=n.toggleSidebar.bind(Ue(Ue(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(t,e),n=t,(r=[{key:"updateFireName",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setState({fireName:t},(function(){e.filterListViewDataByFireName(t)}))}},{key:"updateListViewData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.setState({listViewData:e},(function(){}))}},{key:"updateInfoWindowData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=this.props.dataStore.getActiveFireByOID(e);this.setState({infoWindowData:t})}},{key:"updateSmokeForecastTime",value:function(){var e=this;this.setState((function(t){var n=new Date(t.smokeForecastTime),r=n.setHours(n.getHours()+1);return{smokeForecastTime:r>e.props.smokeLayerTimeInfo.timeExtent[1]?e.props.smokeLayerTimeInfo.timeExtent[0]:r}}),(function(){}))}},{key:"zoomToActiveFire",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=this.props.dataStore.getActiveFireByOID(e);this.setState({activeFireToZoom:t})}},{key:"toggleSmokeForecastLayer",value:function(e){var t=this;this.setState({isSmokeForecastLayerVisible:e},(function(){t.animateSmokeForecastLayer()}))}},{key:"animateSmokeForecastLayer",value:function(){var e=this;this.state.isSmokeForecastLayerVisible?this.timerForSmokeForecastLayerAnimation=setInterval((function(){e.updateSmokeForecastTime()}),1500):clearInterval(this.timerForSmokeForecastLayerAnimation)}},{key:"mapExtentChangeHandler",value:function(e){var t=this.props.dataStore.getActiveFiresInMapExtent(e.extent);this.updateListViewData(t),this.updateMapExtInUrl(e.extent)}},{key:"mapOnClickHandler",value:function(e){var t=this.props.dataStore.searchFireByExtent(e,!0)||-1;this.updateInfoWindowData(t)}},{key:"filterListViewDataByFireName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.dataStore.searchFireByName(e);this.updateListViewData(t)}},{key:"toggleSidebar",value:function(){this.setState({isSidebarMinimized:!this.state.isSidebarMinimized})}},{key:"updateMapExtInUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="ext",n="".concat(e.xmin,",").concat(e.ymin,",").concat(e.xmax,",").concat(e.ymax);j.urlFns.updateQueryParam({key:t,value:n})}},{key:"componentDidMount",value:function(){k.init()}},{key:"render",value:function(){return a.a.createElement("div",{className:"main-content"},a.a.createElement(H,{rightPadding:window.outerWidth<=450?0:450,activeFires:this.props.activeFires,selectedFireName:this.state.fireName,infoWindowData:this.state.infoWindowData,activeFireToZoom:this.state.activeFireToZoom,isSmokeForecastLayerVisible:this.state.isSmokeForecastLayerVisible,smokeForecastTime:this.state.smokeForecastTime,onExtentChange:this.mapExtentChangeHandler,onInfoWindowClose:this.updateInfoWindowData,onClick:this.mapOnClickHandler}),a.a.createElement("div",{className:"side-bar ".concat(this.state.isSidebarMinimized?"is-minimized":"")},a.a.createElement("div",{className:"phone-show text-center padding-leader-quarter ladding-trailer-quarter",onClick:this.toggleSidebar},a.a.createElement("span",{className:"".concat(this.state.isSidebarMinimized?"icon-ui-plus":"icon-ui-minus")})),a.a.createElement("div",{className:"content-wrap"},a.a.createElement(Pe,{data:this.props.activeFires,onSelect:this.updateFireName}),a.a.createElement("div",{className:"font-size--3 leader-half trailer-0"},a.a.createElement("span",{className:"fire-filters-title"},"Active wildfires by affected area (in acres)"),a.a.createElement("span",{className:"js-modal-toggle icon-ui-description margin-left-half font-size-0 cursor-pointer right","data-modal":"about"})),a.a.createElement(Fe,{data:this.props.classBreakInfos}),a.a.createElement(ze,{smokeForecastTime:this.state.smokeForecastTime,onChange:this.toggleSmokeForecastLayer}),a.a.createElement(ke,{data:this.state.listViewData,onMouseEnter:this.updateInfoWindowData,onMouseLeave:this.updateInfoWindowData,onClick:this.zoomToActiveFire}))))}}])&&Ae(n.prototype,r),o&&Ae(n,o),t}(a.a.Component);function Ge(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}(He=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new g,e.next=4,t.init();case 4:n=e.sent,i.a.render(a.a.createElement(qe,{dataStore:t,activeFires:n.activeFires,classBreakInfos:n.classBreakInfos,smokeLayerTimeInfo:n.smokeLayerInfo.timeInfo}),document.getElementById("appRootDiv")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})),Je=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=He.apply(e,t);function o(e){Ge(a,n,r,o,i,"next",e)}function i(e){Ge(a,n,r,o,i,"throw",e)}o(void 0)}))},function(){return Je.apply(this,arguments)})()}});